<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="creat.css">
    <title>Cadastro | AMAF</title>
</head>
<body>
    <div class="box">
        <form id="form-criar-conta" action="criar_conta.php" method="POST" novalidate>
            <fieldset>
                <h2>Cadastro de Conta</h2>
                <br>
                <div class="inputBox">
                    <input type="text" name="nome" id="nome" class="inputUser" required aria-label="Nome Completo">
                    <label for="nome" class="labelInput">Nome Completo</label>
                </div>
                <br>
                <div class="inputBox">
                    <input type="email" name="email" id="email" class="inputUser" required aria-label="Email">
                    <label for="email" class="labelInput">Email</label>
                </div>
                <br>
                <div class="inputBox">
                    <input type="password" name="senha" id="senha" class="inputUser" required minlength="6" aria-label="Senha">
                    <label for="senha" class="labelInput">Senha</label>
                </div>
                <br>
                <p>Sexo:</p>
                <input type="radio" id="feminino" name="sexo" value="feminino" required>
                <label for="feminino">Feminino</label>
                <input type="radio" id="masculino" name="sexo" value="masculino" required>
                <label for="masculino">Masculino</label>
                <input type="radio" id="outros" name="sexo" value="outros" required>
                <label for="outros">Outros</label>
                <br><br>
                <label for="data_nascimento">Data de Nascimento:</label>
                <input type="date" name="data_nascimento" id="data_nascimento" required aria-label="Data de Nascimento">
                <br><br>
                <div class="inputBox">
                    <input type="text" name="cidade" id="cidade" class="inputUser" required aria-label="Cidade">
                    <label for="cidade" class="labelInput">Cidade</label>
                </div>
                <br>
                <div class="inputBox">
                    <input type="text" name="estado" id="estado" class="inputUser" required pattern="[A-Za-z]{2}" aria-label="Estado">
                    <label for="estado" class="labelInput">Estado</label>
                </div>
                <br>
                <div class="inputBox">
                    <input type="text" name="endereco" id="endereco" class="inputUser" required aria-label="Endereço">
                    <label for="endereco" class="labelInput">Endereço</label>
                </div>
                <br>
                <input type="submit" name="submit" id="submit" value="Criar Conta">
                <p id="message" class="error-message hidden"></p>
            </fieldset>
        </form>
    </div>
    <script>
        const form = document.getElementById("form-criar-conta");
        const messageElement = document.getElementById("message");

        form.addEventListener("submit", async function(event) {
            event.preventDefault();
            const formData = new FormData(form);
            try {
                const response = await fetch("criar_conta.php", {
                    method: "POST",
                    body: formData
                });
                if (response.ok) {
                    window.location.href = "login.html";
                } else {
                    throw new Error("Erro ao enviar dados.");
                }
            } catch (error) {
                messageElement.textContent = error.message;
                messageElement.classList.remove("hidden");
            }
        });
    </script>
</body>
</html>
